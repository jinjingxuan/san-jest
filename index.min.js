const path = require("path"),
  execSync = require("child_process")["execSync"],
  fs = require("fs-extra"),
  getSanJestConfig = require("./utils")["getSanJestConfig"];
module.exports = {
  process(e, r, s) {
    var c = getSanJestConfig(s).rollupConfig,
      o = "index",
      s = path.join(process.cwd(), `.cache/${o}.src.js`),
      o = path.join(process.cwd(), `.cache/${o}.dist.js`);
    fs.outputFileSync(s, `import App from '${r}';export default App;`);
    c = c
      ? path.resolve(process.cwd(), c)
      : path.resolve(__dirname, "rollup.config.js");
    return execSync(`rollup -c ${c}`), { code: fs.readFileSync(o, "utf-8") };
  },
};
